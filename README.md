
# SoundGame
本程序的核心玩法就是一个基于养成和声音的游戏。

## 主要玩法
你是一个拥有灵敏听力的幸存者，能在敌人出现时就感知到敌人的未知，请利用现有的武器和有限的弹药尽可能的活下去。
敌人会持续的在屏幕外生成并缓慢的向屏幕内移动，直到看到你就会猛冲过来，你需要用武器去击杀他们。

## 优点
- 本游戏由大量的武器库，你可以根据自己的需要选择不同的武器。
- 本游戏有本地sql存档可以进行自动存储。
- 本游戏有是基于音游来设计，你可以预知到敌人的位置。

## 设计思路
- pages
  - base_page.py
    主要是实现了基础的页面父类，定义了
    ```update，draw，handle_event，set_current_user```父类函数，给其他page继承。
    
  - equipment_page.py
    主要实现了武器页面，继承了base_page.py，定义了武器页面的渲染和事件处理。实现了动态的武器拖拽并动态更改User.py中实现的player属性来实现动态武器管理。
    <image src="images/equipment_page.png" width="100%" height="100%">
  - game_page.py
    实现了主要的游戏逻辑，在这个文件里面，定义了Emeny类，用于生成敌人，并实现敌人移动和攻击，并定义了敌人的移动速度，血量，类型，生成位置和掉血逻辑等。同时定义了声音生成的方法，在敌人出现时就通过声道的融合生成一个声音，并播放出来用来定位敌人在屏幕外的位置。
    <image src="images/game_page.png" width="100%" height="100%">
  - home_page.py
    实现了主界面的逻辑。包含了开始游戏，退出游戏，登录注册，武器管理等按钮功能，并在右上角显示了玩家信息和局外积分。
    <image src="images/home_page.png" width="100%" height="100%">
  - login_page.py
    实现了登录页面逻辑。每次加载时先通过判断本地的json文件，如果没有则创建，然后通过访问config.py里面指定的mysql数据库获取用户信息，并写入到本地的json文件中。如果用户不存在则提示用户注册，否则则登录成功。
    <image src="images/login_page.png" width="100%" height="100%">
  - register_page.py
    实现了注册页面逻辑。主要是和云端的sql通信，如果sql里面有数据则通过这些数据进行判断是否注册成功的逻辑。
    <image src="images/register_page.png" width="100%" height="100%">
  - lottery_page.py
    实现了抽奖页面逻辑。通过积分抽奖，可以获得武器，并增加积分。获得的武器直接存储在user_db.json文件中实现永久化存储。
    <image src="images/lottery_page.png" width="100%" height="100%">
    
- core
  - Player.py
    定义了角色在局内携带的武器以及健康情况和子弹数量等属性。
  - User.py
    定义了用户的局外信息并实现了Player类，其中定义的信息被存储在user_db.json文件中，需要时实现了动态读取的功能。
  - Weapon.py
    定义了武器的属性，如名称，攻击力，弹道速度，弹道大小，弹道数量，弹道类型，弹道模式，弹道伤害，弹道范围等属性。主要时通过一个Weapon父类来实现基础的武器定义并在后面通过修改父类的属性来实现武器的动态定义，能直接在后面列出的武器中实现新增武器。
- init
  - initsql.py
    主要实现了数据库的初始化逻辑。在对应Mysql库中，通过一个调用该py文件就可以初始化数据库来实现用户数据存储，调用的还是config.py里面指定的数据库。
- utils
  - utils.py
    主要实现了一些基础的工具函数，如数据库连接，数据库查询，数据库更新等。会在登录，注册，抽奖，游戏开始和结束等会更改用户数据时候触发一次与云端通信，并实现本地user_db.json和云端的user的sql数据库同步。
- main.py
  实现了程序入口，直接指向home_page.py文件，但是运行时路径还是保持在Version5文件夹。不然会存在访问不到其他文件夹的尴尬场景。
- testsql.py
  实现了对初始化数据库的测试逻辑，主要测试了数据库的连接，查询，更新等逻辑。需要先对未初始化的数据库使用Init.initsql.py文件才可以使用该文件。
- config.py
  实现了数据库的配置信息，如数据库地址，数据库用户名，数据库密码，数据库端口等。
  实现了主要颜色的存储，如背景颜色，字体颜色，按钮颜色等。
  实现了主要字体的存储，如字体类型，字体大小等。


## 程序开发后续规划
1. 添加武器库，实现武器的动态添加，如添加武器，删除武器，修改武器，添加武器库，删除武器库，修改武器库等。
2. 更新更多的敌人类型并给敌人加上动态贴图。
3. 针对抽奖会重复问题进行更改。